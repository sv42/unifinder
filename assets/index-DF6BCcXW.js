import{a as m}from"./leaflet-src-DGnmFFbH.js";import{a as c,R as L}from"./chunk-EF7DTUVF-DePYFLeH.js";import{a as h}from"./index-CywEabac.js";function g(o,n){const e=c.useRef(n);c.useEffect(function(){n!==e.current&&o.attributionControl!=null&&(e.current!=null&&o.attributionControl.removeAttribution(e.current),n!=null&&o.attributionControl.addAttribution(n)),e.current=n},[o,n])}const N=1;function S(o){return Object.freeze({__version:N,map:o})}function Z(o,n){return Object.freeze({...o,...n})}const v=c.createContext(null);function E(){const o=c.use(v);if(o==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return o}function j(o){function n(e,t){const{instance:r,context:u}=o(e).current;c.useImperativeHandle(t,()=>r);const{children:a}=e;return a==null?null:L.createElement(v,{value:u},a)}return c.forwardRef(n)}function k(o){function n(e,t){const[r,u]=c.useState(!1),{instance:a}=o(e,u).current;c.useImperativeHandle(t,()=>a),c.useEffect(function(){r&&a.update()},[a,r,e.children]);const i=a._contentNode;return i?h.createPortal(e.children,i):null}return c.forwardRef(n)}function I(o){function n(e,t){const{instance:r}=o(e).current;return c.useImperativeHandle(t,()=>r),null}return c.forwardRef(n)}function A(o){return function(e){const t=E(),r=o(e,t),{instance:u}=r.current,a=c.useRef(e.position),{position:i}=e;return c.useEffect(function(){return u.addTo(t.map),function(){u.remove()}},[t.map,u]),c.useEffect(function(){i!=null&&i!==a.current&&(u.setPosition(i),a.current=i)},[u,i]),r}}function w(o,n){const e=c.useRef(void 0);c.useEffect(function(){return n!=null&&o.instance.on(n),e.current=n,function(){e.current!=null&&o.instance.off(e.current),e.current=null}},[o,n])}function R(o,n){const e=o.pane??n.pane;return e?{...o,pane:e}:o}function D(o,n){return function(t,r){const u=E(),a=o(R(t,u),u);return g(u.map,t.attribution),w(a.current,t.eventHandlers),n(a.current,u,t,r),a}}function y(o,n,e){return Object.freeze({instance:o,context:n,container:e})}function p(o,n){return n==null?function(t,r){const u=c.useRef(void 0);return u.current||(u.current=o(t,r)),u}:function(t,r){const u=c.useRef(void 0);u.current||(u.current=o(t,r));const a=c.useRef(t),{instance:i}=u.current;return c.useEffect(function(){a.current!==t&&(n(i,t,a.current),a.current=t)},[i,t,n]),u}}function _(o,n){c.useEffect(function(){return(n.layerContainer??n.map).addLayer(o.instance),function(){var u;(u=n.layerContainer)==null||u.removeLayer(o.instance),n.map.removeLayer(o.instance)}},[n,o])}function H(o){return function(e){const t=E(),r=o(R(e,t),t);return g(t.map,e.attribution),w(r.current,e.eventHandlers),_(r.current,t),r}}function V(o){function n(r,u){return y(o(r),u)}const e=p(n),t=A(e);return I(t)}function B(o,n){const e=p(o,n),t=H(e);return j(t)}function G(o,n){const e=p(o),t=D(e,n);return k(t)}function U(o,n){const e=p(o,n),t=H(e);return I(t)}function X(o,n,e){const{opacity:t,zIndex:r}=n;t!=null&&t!==e.opacity&&o.setOpacity(t),r!=null&&r!==e.zIndex&&o.setZIndex(r)}function q({bounds:o,boundsOptions:n,center:e,children:t,className:r,id:u,placeholder:a,style:i,whenReady:l,zoom:s,...C},x){const[M]=c.useState({className:r,id:u,style:i}),[f,z]=c.useState(null),O=c.useRef(void 0);c.useImperativeHandle(x,()=>(f==null?void 0:f.map)??null,[f]);const P=c.useCallback(b=>{if(b!==null&&!O.current){const d=new m.Map(b,C);O.current=d,e!=null&&s!=null?d.setView(e,s):o!=null&&d.fitBounds(o,n),l!=null&&d.whenReady(l),z(S(d))}},[]);c.useEffect(()=>()=>{f==null||f.map.remove()},[f]);const T=f?L.createElement(v,{value:f},t):a??null;return L.createElement("div",{...M,ref:P},T)}const Q=c.forwardRef(q),W=B(function({position:n,...e},t){const r=new m.Marker(n,e);return y(r,Z(t,{overlayContainer:r}))},function(n,e,t){e.position!==t.position&&n.setLatLng(e.position),e.icon!=null&&e.icon!==t.icon&&n.setIcon(e.icon),e.zIndexOffset!=null&&e.zIndexOffset!==t.zIndexOffset&&n.setZIndexOffset(e.zIndexOffset),e.opacity!=null&&e.opacity!==t.opacity&&n.setOpacity(e.opacity),n.dragging!=null&&e.draggable!==t.draggable&&(e.draggable===!0?n.dragging.enable():n.dragging.disable())}),Y=G(function(n,e){const t=new m.Popup(n,e.overlayContainer);return y(t,e)},function(n,e,{position:t},r){c.useEffect(function(){const{instance:a}=n;function i(s){s.popup===a&&(a.update(),r(!0))}function l(s){s.popup===a&&r(!1)}return e.map.on({popupopen:i,popupclose:l}),e.overlayContainer==null?(t!=null&&a.setLatLng(t),a.openOn(e.map)):e.overlayContainer.bindPopup(a),function(){var C;e.map.off({popupopen:i,popupclose:l}),(C=e.overlayContainer)==null||C.unbindPopup(),e.map.removeLayer(a)}},[n,e,r,t])}),$=U(function({url:n,...e},t){const r=new m.TileLayer(n,R(e,t));return y(r,t)},function(n,e,t){X(n,e,t);const{url:r}=e;r!=null&&r!==t.url&&n.setUrl(r)}),ee=V(function(n){return new m.Control.Zoom(n)});export{Q as MapContainer,W as Marker,Y as Popup,$ as TileLayer,ee as ZoomControl};
