import{a as c,p as e,w as j}from"./chunk-EF7DTUVF-DePYFLeH.js";import{s as x,u as g}from"./supabase-lbAFZqEE.js";import{N as f}from"./Navbar-BN-7-YAR.js";function N(){const[s,o]=c.useState({supabaseUrl:!1,supabaseKey:!1,hasValidUrl:!1});c.useEffect(()=>{const l="https://cqlmgpvhwjonbutztjkz.supabase.co";o({supabaseUrl:!0,supabaseKey:!0,hasValidUrl:l.startsWith("https://")&&l.endsWith(".supabase.co")&&l!=="your_supabase_url"})},[]);const t=s.supabaseUrl&&s.supabaseKey&&s.hasValidUrl;return e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Перевірка змінних середовища"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:`w-4 h-4 rounded-full mr-2 ${s.supabaseUrl?"bg-green-500":"bg-red-500"}`}),e.jsxs("span",{className:s.supabaseUrl?"text-green-700":"text-red-700",children:["VITE_SUPABASE_URL: ",s.supabaseUrl?"✅ Налаштовано":"❌ Відсутній"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:`w-4 h-4 rounded-full mr-2 ${s.supabaseKey?"bg-green-500":"bg-red-500"}`}),e.jsxs("span",{className:s.supabaseKey?"text-green-700":"text-red-700",children:["VITE_SUPABASE_ANON_KEY: ",s.supabaseKey?"✅ Налаштовано":"❌ Відсутній"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:`w-4 h-4 rounded-full mr-2 ${s.hasValidUrl?"bg-green-500":"bg-red-500"}`}),e.jsxs("span",{className:s.hasValidUrl?"text-green-700":"text-red-700",children:["Формат URL: ",s.hasValidUrl?"✅ Правильний":"❌ Неправильний"]})]})]}),!t&&e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded",children:[e.jsx("h4",{className:"text-blue-800 font-medium mb-2",children:"Як виправити:"}),e.jsxs("ol",{className:"text-blue-700 text-sm space-y-1",children:[e.jsx("li",{children:"1. Створи файл .env.local в корені проекту"}),e.jsx("li",{children:"2. Додай правильні значення з Supabase Dashboard"}),e.jsx("li",{children:"3. Перезапусти сервер (npm run dev)"})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("h5",{className:"text-blue-800 font-medium mb-1",children:"Приклад .env.local:"}),e.jsx("pre",{className:"text-xs text-blue-700 bg-blue-100 p-2 rounded",children:`VITE_SUPABASE_URL=https://your-project-id.supabase.co
VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...`})]})]})]})}function v(){const[s,o]=c.useState({url:"",startsWithHttps:!1,endsWithSupabase:!1,hasValidFormat:!1,issues:[]});return c.useEffect(()=>{const t="https://cqlmgpvhwjonbutztjkz.supabase.co",l=[];let d=!1,a=!1;t.startsWith("https://")?d=!0:l.push("URL не починається з https://"),t.endsWith(".supabase.co")?a=!0:l.push("URL не закінчується на .supabase.co");const r=d&&a&&t.length>20;o({url:t,startsWithHttps:d,endsWithSupabase:a,hasValidFormat:r,issues:l})},[]),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3 text-yellow-800",children:"Детальна перевірка URL"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-yellow-800 font-medium mb-2",children:"Поточний URL:"}),e.jsx("pre",{className:"text-sm bg-yellow-100 p-2 rounded border text-yellow-700 break-all",children:s.url||"(порожній)"})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:`w-4 h-4 rounded-full mr-2 ${s.startsWithHttps?"bg-green-500":"bg-red-500"}`}),e.jsxs("span",{className:s.startsWithHttps?"text-green-700":"text-red-700",children:["Починається з https://: ",s.startsWithHttps?"✅":"❌"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:`w-4 h-4 rounded-full mr-2 ${s.endsWithSupabase?"bg-green-500":"bg-red-500"}`}),e.jsxs("span",{className:s.endsWithSupabase?"text-green-700":"text-red-700",children:["Закінчується на .supabase.co: ",s.endsWithSupabase?"✅":"❌"]})]})]}),s.issues.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-red-800 font-medium mb-2",children:"Проблеми:"}),e.jsx("ul",{className:"text-red-700 text-sm space-y-1",children:s.issues.map((t,l)=>e.jsxs("li",{children:["• ",t]},l))})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-3",children:[e.jsx("h4",{className:"text-blue-800 font-medium mb-2",children:"Як виправити:"}),e.jsx("p",{className:"text-blue-700 text-sm mb-2",children:"URL має виглядати так:"}),e.jsx("pre",{className:"text-xs text-blue-700 bg-blue-100 p-2 rounded",children:"VITE_SUPABASE_URL=https://abcdefghijklmnop.supabase.co"}),e.jsxs("p",{className:"text-blue-700 text-sm mt-2",children:["Де ",e.jsx("code",{className:"bg-blue-200 px-1 rounded",children:"abcdefghijklmnop"})," - це ID твого проекту з Supabase Dashboard."]})]}),e.jsxs("div",{className:"mt-4 bg-green-50 border border-green-200 rounded p-3",children:[e.jsx("h4",{className:"text-green-800 font-medium mb-2",children:"Як отримати правильний URL:"}),e.jsxs("ol",{className:"text-green-700 text-sm space-y-1",children:[e.jsxs("li",{children:["1. Перейди в ",e.jsx("a",{href:"https://supabase.com",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"Supabase Dashboard"})]}),e.jsx("li",{children:"2. Виберіть твій проект"}),e.jsx("li",{children:"3. Перейди в Settings → API"}),e.jsx("li",{children:'4. Скопіюй "Project URL" (виглядає як https://xxx.supabase.co)'}),e.jsx("li",{children:"5. Встав в .env.local файл"}),e.jsx("li",{children:"6. Перезапусти сервер"})]})]})]})}function y(){const[s,o]=c.useState({universities:!1,programs:!1,userFavorites:!1,userProfiles:!1,hasData:!1,loading:!0,error:null});c.useEffect(()=>{t()},[]);const t=async()=>{if(!x){o(a=>({...a,loading:!1,error:"Supabase клієнт не налаштований"}));return}try{o(n=>({...n,loading:!0,error:null}));const a=["universities","programs","user_favorites","user_profiles"],r={};for(const n of a)try{const{data:u,error:h}=await x.from(n).select("count").limit(1);h?r[n]=!1:r[n]=!0}catch{r[n]=!1}let m=!1;if(r.universities)try{const{data:n,error:u}=await x.from("universities").select("id").limit(1);m=!u&&n&&n.length>0}catch{m=!1}o({universities:r.universities||!1,programs:r.programs||!1,userFavorites:r.user_favorites||!1,userProfiles:r.user_profiles||!1,hasData:m,loading:!1,error:null})}catch(a){o(r=>({...r,loading:!1,error:a.message}))}},l=a=>a?"text-green-600 bg-green-100":"text-red-600 bg-red-100",d=a=>a?"✅ Створена":"❌ Відсутня";return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Перевірка бази даних"}),s.loading&&e.jsx("div",{className:"text-gray-600",children:"Перевірка таблиць..."}),s.error&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"text-red-800 font-medium mb-2",children:"Помилка:"}),e.jsx("p",{className:"text-red-700",children:s.error})]}),!s.loading&&!s.error&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:`inline-block px-4 py-2 rounded-full text-sm font-medium ${l(s.universities)}`,children:["Таблиця universities: ",d(s.universities)]}),e.jsxs("div",{className:`inline-block px-4 py-2 rounded-full text-sm font-medium ${l(s.programs)}`,children:["Таблиця programs: ",d(s.programs)]}),e.jsxs("div",{className:`inline-block px-4 py-2 rounded-full text-sm font-medium ${l(s.userFavorites)}`,children:["Таблиця user_favorites: ",d(s.userFavorites)]}),e.jsxs("div",{className:`inline-block px-4 py-2 rounded-full text-sm font-medium ${l(s.userProfiles)}`,children:["Таблиця user_profiles: ",d(s.userProfiles)]})]}),e.jsxs("div",{className:`inline-block px-4 py-2 rounded-full text-sm font-medium ${l(s.hasData)}`,children:["Дані в таблиці universities: ",s.hasData?"✅ Є дані":"❌ Немає даних"]}),e.jsx("button",{onClick:t,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg mt-4",children:"Перевірити знову"})]}),!s.loading&&!s.universities&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mt-6",children:[e.jsx("h3",{className:"text-yellow-800 font-medium mb-2",children:"Таблиці не створені!"}),e.jsx("p",{className:"text-yellow-700 mb-3",children:"Потрібно створити таблиці в Supabase. Використай SQL код з файлу uni.md"}),e.jsxs("div",{className:"bg-yellow-100 p-3 rounded",children:[e.jsx("h4",{className:"text-yellow-800 font-medium mb-2",children:"Як створити:"}),e.jsxs("ol",{className:"text-yellow-700 text-sm space-y-1",children:[e.jsx("li",{children:"1. Перейди в Supabase Dashboard"}),e.jsx("li",{children:"2. Відкрий SQL Editor"}),e.jsx("li",{children:"3. Скопіюй код з файлу uni.md"}),e.jsx("li",{children:'4. Натисни "Run"'}),e.jsx("li",{children:"5. Перезавантаж цю сторінку"})]})]})]}),!s.loading&&s.universities&&!s.hasData&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-6",children:[e.jsx("h3",{className:"text-blue-800 font-medium mb-2",children:"Таблиці створені, але немає даних!"}),e.jsx("p",{className:"text-blue-700 mb-3",children:"Таблиці існують, але в них немає університетів. SQL код з uni.md автоматично додасть тестові дані."}),e.jsxs("div",{className:"bg-blue-100 p-3 rounded",children:[e.jsx("h4",{className:"text-blue-800 font-medium mb-2",children:"Що робити:"}),e.jsxs("ol",{className:"text-blue-700 text-sm space-y-1",children:[e.jsx("li",{children:"1. Переконайся, що запустив весь SQL код з uni.md"}),e.jsx("li",{children:"2. Код має додати 4 українських університети"}),e.jsx("li",{children:"3. Перевір в Table Editor чи є дані"}),e.jsx("li",{children:'4. Натисни "Перевірити знову"'})]})]})]}),!s.loading&&s.universities&&s.hasData&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mt-6",children:[e.jsx("h3",{className:"text-green-800 font-medium mb-2",children:"✅ База даних готова!"}),e.jsx("p",{className:"text-green-700",children:"Всі таблиці створені і є тестові дані. Можна переходити до наступного етапу розробки!"})]})]})}function S(){const[s,o]=c.useState([]),[t,l]=c.useState(!0),[d,a]=c.useState(null),[r,m]=c.useState("checking");c.useEffect(()=>{if(!x){m("error"),a("Supabase клієнт не налаштований. Перевірте файл .env.local"),l(!1);return}n()},[]);const n=async()=>{try{if(m("checking"),!x)throw new Error("Supabase клієнт не налаштований. Перевірте файл .env.local");const{data:i,error:b}=await x.from("universities").select("count").limit(1);if(b)throw b;m("connected");const p=await g.getAll();o(p),l(!1)}catch(i){console.error("Помилка підключення до Supabase:",i),m("error"),a(i.message),l(!1)}},u=()=>{switch(r){case"connected":return"text-green-600 bg-green-100";case"error":return"text-red-600 bg-red-100";default:return"text-yellow-600 bg-yellow-100"}},h=()=>{switch(r){case"connected":return"✅ Підключено до Supabase";case"error":return"❌ Помилка підключення";default:return"⏳ Перевірка підключення..."}};return e.jsx("div",{className:"max-w-4xl mx-auto p-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Тестування підключення Supabase"}),e.jsx("div",{className:`inline-block px-4 py-2 rounded-full text-sm font-medium mb-6 ${u()}`,children:h()}),d&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"text-red-800 font-medium mb-2",children:"Помилка:"}),e.jsx("p",{className:"text-red-700",children:d}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-red-800 font-medium mb-2",children:"Можливі причини:"}),e.jsxs("ul",{className:"text-red-700 text-sm space-y-1",children:[e.jsx("li",{children:"• Не налаштовані змінні середовища в .env.local"}),e.jsx("li",{children:"• Неправильний URL або ключ Supabase"}),e.jsx("li",{children:"• URL не починається з https:// або не закінчується на .supabase.co"}),e.jsx("li",{children:"• Таблиці не створені в базі даних"}),e.jsx("li",{children:"• Проблеми з мережею"})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("h4",{className:"text-yellow-800 font-medium mb-2",children:"Перевірте файл .env.local:"}),e.jsx("pre",{className:"text-xs text-yellow-700 bg-yellow-100 p-2 rounded",children:`VITE_SUPABASE_URL=https://your-project-id.supabase.co
VITE_SUPABASE_ANON_KEY=your-anon-public-key`})]})]}),e.jsx("button",{onClick:n,disabled:t,className:"bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg mb-6",children:t?"Тестування...":"Тестувати знову"}),r==="connected"&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold mb-4",children:["Університети в базі даних (",s.length,")"]}),t?e.jsx("div",{className:"text-gray-600",children:"Завантаження університетів..."}):s.length>0?e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:s.map(i=>e.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsx("h4",{className:"font-semibold text-lg mb-2",children:i.name}),e.jsxs("p",{className:"text-gray-600 mb-2",children:[i.city,", ",i.country]}),i.rating&&e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("span",{className:"text-yellow-500",children:"★"}),e.jsxs("span",{className:"ml-1 text-sm",children:[i.rating,"/10"]})]}),i.tuition_fee_min&&e.jsxs("p",{className:"text-sm text-gray-500",children:["Вартість: $",i.tuition_fee_min," - $",i.tuition_fee_max]})]},i.id))}):e.jsxs("div",{className:"text-gray-600 bg-gray-50 rounded-lg p-4",children:[e.jsx("p",{children:"У базі даних поки немає університетів."}),e.jsx("p",{className:"text-sm mt-2",children:"Додай тестові дані через Supabase Dashboard або використай SQL з інструкцій."})]})]}),r==="error"&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-6",children:[e.jsx("h3",{className:"text-blue-800 font-medium mb-2",children:"Що робити далі:"}),e.jsxs("ol",{className:"text-blue-700 text-sm space-y-2",children:[e.jsxs("li",{children:["1. Створи проект на ",e.jsx("a",{href:"https://supabase.com",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"supabase.com"})]}),e.jsx("li",{children:"2. Створи файл .env.local з твоїми ключами"}),e.jsx("li",{children:"3. Створи таблиці в базі даних (див. SUPABASE_SETUP.md)"}),e.jsx("li",{children:"4. Додай тестові дані"}),e.jsx("li",{children:"5. Перезавантаж сторінку"})]})]})]})})}function E(){return[{title:"University Finder - Тестування"},{name:"description",content:"Тестування підключення до Supabase та бази даних"}]}const k=j(function(){return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(f,{}),e.jsx("div",{className:"py-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"🧪 Тестування University Finder"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Перевірка підключення до Supabase та бази даних"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(N,{}),e.jsx(v,{}),e.jsx(y,{}),e.jsx(S,{})]}),e.jsxs("div",{className:"mt-12 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-blue-800 mb-4",children:"ℹ️ Інформація про тестування"}),e.jsxs("div",{className:"text-blue-700 space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"EnvCheck:"})," Перевіряє наявність та правильність змінних середовища"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"UrlDebug:"})," Детальна перевірка формату Supabase URL"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"DatabaseCheck:"})," Перевіряє наявність таблиць та даних в базі"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"SupabaseTest:"})," Тестує підключення та показує список університетів"]})]}),e.jsx("div",{className:"mt-4 p-3 bg-blue-100 rounded",children:e.jsxs("p",{className:"text-blue-800 text-sm",children:[e.jsx("strong",{children:"Порада:"})," Якщо всі компоненти показують ✅, можна переходити до розробки основного функціоналу!"]})})]})]})})]})});export{k as default,E as meta};
